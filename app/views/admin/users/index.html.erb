<div class="container-fluid">
  <%# <h4 class="c-grey-900 mT-10 mB-30">All PubliCV users</h4> %>
  <div class="row">
    <div class="col-md-12">
      <div class="bgc-white bd bdrs-3 p-20 mB-20">
        <h4 class="c-grey-900 mB-20">All PubliCV users</h4>
        <table id="dataTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
        </table>
      </div>
    </div>

  </div>
</div>
<script type="text/javascript">
  document.addEventListener('turbolinks:load', function () {
    if (document.getElementById("dataTable")) {
      $('#dataTable').dataTable({
        "scrollX": true,
        ajax: {
          url: "<%= admin_users_records_path %>",
          dataSrc: 'data',
        },
        serverSide: true,
        columns: [
            { title: 'Email', data: 'email' },
            {
              title: 'Full Name',
              data: null,
              "render": function(data, type, full) {
                  return full['first_name'] + ' ' + full['last_name'];
              }
            },
            { title: 'Tel', data: 'tel' },
            {
              title: 'CV Subdomain',
              data: 'subdomain',
              "render": function ( data, type, row, meta ) {
                return '<a href="/cv/' + data + '">' + data + '</a>';
              }
            },
            { title: 'Created at', data: 'created_at', "searchable": false }
        ],
        order: [['4', 'desc']]
      });
    }
  });
</script>
