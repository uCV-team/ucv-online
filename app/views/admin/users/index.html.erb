<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <div class="bgc-white bd bdrs-3 p-20 mB-20">
        <h4 class="c-grey-900 mB-20"><%= t('user_page.header') %></h4>
        <table id="dataTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
        </table>
      </div>
    </div>

  </div>
</div>
<script type="text/javascript">
  document.addEventListener("turbolinks:load", function(event) {
    $('#dataTable').dataTable({
      "scrollX": true,
      "retrieve": true,
      ajax: {
        url: "<%= records_admin_users_path %>",
        dataSrc: 'data',
      },
      serverSide: true,
      columns: [
          { title: "<%= t('user_page.datatable_columns.email') %>", data: 'email' },
          {
            title: "<%= t('user_page.datatable_columns.full_name') %>",
            data: null,
            "render": function(data, type, full) {
                return full['first_name'] + ' ' + full['last_name'];
            }
          },
          { title: "<%= t('user_page.datatable_columns.telephone') %>", data: 'tel' },
          {
            title: "<%= t('user_page.datatable_columns.subdomain') %>",
            data: 'subdomain',
            "render": function ( data, type, row, meta ) {
              return '<a target="_blank" href="/cv/' + data + '">' + data + '</a>';
            }
          },
          { title: "<%= t('user_page.datatable_columns.created_at') %>", data: 'created_at', "searchable": false }
      ],
      order: [['4', 'desc']]
    });
  });
</script>
