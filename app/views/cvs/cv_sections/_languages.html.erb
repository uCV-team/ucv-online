<% languages = @cv.languages.chronological_order %>

<% if (can? :update, @cv) || languages.present? %>
  <div class="border-top py-5 pl-3 pl-md-6 pr-2">
    <div class="d-flex align-items-center justify-content-between">
      <h6><%= t('content.main.cv.show.languages.title') %></h6>
      <% if can? :update, @cv %>
        <%= link_to new_cv_language_path, remote: true do %>
          <span class="badge rounded-circle badge-primary-light text-primary p-2"><i class="icon-plus"></i></span>
        <% end %>
      <% end %>
    </div>
    <div class="row">
      <% languages.each do |language| %>
        <div class="col-12 col-md-8 col-lg-4">
          <div class="d-flex flex-row font-size-14 pt-5">
            <div class="w-100">
              <h6><%= language.language %></h6>
              <p><%= cefr_level language.level %></p>
            </div>

            <% if can? :update, @cv %>
              <%= link_to edit_cv_language_path(language), remote: true do %>
                <span class="badge rounded-circle badge-primary-light text-primary p-2 mx-1"><i class="icon-pencil"></i></span>
              <% end %>
              <%= link_to cv_language_path(language), method: :delete, data: { confirm: t('confirmation') } do %>
                <span class="badge rounded-circle badge-primary-light text-primary p-2 mx-1"><i class="fas fa-trash-alt"></i></span>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
<% end %>
